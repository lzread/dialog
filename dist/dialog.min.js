/*!
 * Dialog.js v1.0.0
 * https://lzread.github.io/dialog
 *
 * Copyright 2020-present lzread
 * Released under the MIT license
 *
 * Date: 2020-12-23T07:39:08.247Z
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Dialog=e()}(this,function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s={title:"提示",width:"500px",height:"auto",fullscreen:!1,customClass:"",showClose:!0,showToggle:!1,modal:!0,drag:!1,closeOnClickModal:!1,footer:!0,cancelButtonText:"取消",submitButtonText:"确定",cancelCallBack:function(t){return!0},submitCallBack:function(t){return!0},beforeClose:function(t){return!0}},t={render:function(){var t,e,i=this.options,n=this.container;i.width.includes("px")?(n.style.width=i.width,t=i.width.replace("px",""),n.style.left=window.innerWidth/2-t/2+"px"):i.width.includes("%")?(n.style.width=i.width,t=i.width.replace("%",""),n.style.left=t/2+"%"):(t=i.width,n.style.width=i.width+"px",n.style.left=window.innerWidth/2-t/2+"px"),i.height.includes("px")?(n.style.height=i.height,e=i.height.replace("px",""),n.style.top=window.innerHeight/2-e/2+"px"):i.height.includes("%")?(n.style.height=i.height,e=i.height.replace("%",""),n.style.top=e/2+"%"):i.height.includes("auto")?(n.style.maxHeight="80%",n.style.height="auto",n.style.top="10%"):(e=i.height,n.style.height=i.height+"px",n.style.top=window.innerHeight/2-e/2+"px")}},i="undefined"!=typeof window&&void 0!==window.document,n=i?window:{},l=Number.isNaN||n.isNaN;function a(t){return"number"==typeof t&&!l(t)}function c(t){return"object"===e(t)&&null!==t}var r=Object.prototype.hasOwnProperty;var d=Object.assign||function(i){for(var t=arguments.length,e=new Array(1<t?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return c(i)&&0<e.length&&e.forEach(function(e){c(e)&&Object.keys(e).forEach(function(t){i[t]=e[t]})}),i};function h(e,i){if(e&&"function"==typeof i)if(Array.isArray(e)||a(e.length))for(var t=e.length,n=0;n<t&&!1!==i.call(e,e[n],n,e);n+=1);else c(e)&&Object.keys(e).forEach(function(t){i.call(e,e[t],t,e)});return e}function u(t,e){var i;t&&e&&(a(t.length)?h(t,function(t){u(t,e)}):t.classList?t.classList.add(e):(i=t.className.trim())?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e)}function f(t,e){t&&e&&(a(t.length)?h(t,function(t){f(t,e)}):t.classList?t.classList.remove(e):0<=t.className.indexOf(e)&&(t.className=t.className.replace(e,"")))}function m(i,t,n,e){var o=3<arguments.length&&void 0!==e?e:{},s=n;t.trim().split(/\s\s*/).forEach(function(t){var e;b||(e=i.listeners)&&e[t]&&e[t][n]&&(s=e[t][n],delete e[t][n],0===Object.keys(e[t]).length&&delete e[t],0===Object.keys(e).length&&delete i.listeners),i.removeEventListener(t,s,o)})}function p(s,t,l,e){var a=3<arguments.length&&void 0!==e?e:{},c=l;t.trim().split(/\s\s*/).forEach(function(n){var t,o;a.once&&!b&&(t=s.listeners,c=function(){delete o[n][l],s.removeEventListener(n,c,a);for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];l.apply(s,e)},(o=void 0===t?{}:t)[n]||(o[n]={}),o[n][l]&&s.removeEventListener(n,o[n][l],a),o[n][l]=c,s.listeners=o),s.addEventListener(n,c,a)})}function g(t,e){return t.getAttribute("data-".concat(e.replace(/\s\s*/,"$1-$2").toLowerCase()))}var v,y,b=(y=!1,i&&(v=!1,w=function(){},_=Object.defineProperty({},"once",{get:function(){return y=!0,v},set:function(t){v=t}}),n.addEventListener("test",w,_),n.removeEventListener("test",w,_)),y),i={show:function(){this.dialog.style.display="block",this.isShow=!0,this.bind(),this.render(),this.options.fullscreen&&this.fullscreen()},hide:function(){this.dialog.style.display="none",this.isShow=!1,this.unbind(),this.reset()},min:function(){this.render()},max:function(){var t=this.container;t.style.left=0,t.style.top=0,t.style.width="100%",t.style.height="100%",t.style.maxHeight=""},fullscreen:function(){var t=this.button;this.max(),h(t,function(t,e){"toogle"==g(t,"dialog-action")&&u(t,"isActive")})},reset:function(){h(this.button,function(t,e){f(t,"isActive")}),this.render()}},n={bind:function(){var t=this.options,e=this.dialog,i=(this.mask,this.header);p(e,"click",this.onClick=this.click.bind(this)),p(window,"resize",this.onResize=this.resize.bind(this)),t.drag&&(p(i,"mousedown",this.onmousedown=this.mousedown.bind(this)),p(document,"mousemove",this.onmousemove=this.mousemove.bind(this)),p(document,"mouseup",this.onmouseup=this.mouseup.bind(this)))},unbind:function(){var t=this.options,e=this.dialog,i=this.header;m(e,"click",this.onClick),m(window,"resize",this.onResize),t.drag&&(m(i,"mousedown",this.onmousedown),m(document,"mousemove",this.onmousemove),m(document,"mouseup",this.onmouseup))}},w={click:function(t){var e,i,n=t.target,o=this.options;switch(g(n,"dialog-action")){case"toogle":i="isActive",(e=n)&&i&&(e.classList?e.classList.contains(i):-1<e.className.indexOf(i))?(f(n,"isActive"),this.min()):(u(n,"isActive"),this.max());break;case"close":o.beforeClose(this)&&this.hide();break;case"cancel":o.cancelCallBack(this)&&this.hide();break;case"submit":o.submitCallBack(this)&&this.hide()}},dblclick:function(t){t.preventDefault()},mousedown:function(t){t.preventDefault();var e=this.container;return this.clientX=t.clientX-e.offsetLeft,this.clientY=t.clientY-e.offsetTop,!(this.drag=!0)},mousemove:function(t){if(t.preventDefault(),this.drag){var e=this.container,i=t.clientX-this.clientX,t=t.clientY-this.clientY;return i<0?i=0:i>document.documentElement.clientWidth-e.offsetWidth&&(i=document.documentElement.clientWidth-e.offsetWidth),t<0?t=0:t>document.documentElement.clientHeight-e.offsetHeight&&(t=document.documentElement.clientHeight-e.offsetHeight),e.style.left=i+"px",e.style.top=t+"px",!1}},mouseup:function(t){t.preventDefault(),this.drag=!1},resize:function(){this.render()}},_=function(){function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),!t||1!==t.nodeType)throw new Error("The first argument is required and must be an element.");this.element=t,this.options=d({},s,function(t){if(!c(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&r.call(i,"isPrototypeOf")}catch(t){return!1}}(e)&&e),this.init()}var t,e,n;return t=i,(e=[{key:"init",value:function(){var t=this.element;this.options;if(!("div"===t.tagName.toLowerCase()))throw new Error("The element must be div.");this.bulid()}},{key:"bulid",value:function(){var t=this.element,e=this.options,i=document.createElement("div");e.body=t.innerHTML,t.parentNode.removeChild(t),i.innerHTML=this.dialogTemplate();var n=i.querySelector(".__dialog"),o=i.querySelector(".__dialog-mask"),s=n.querySelector(".__dialog-container"),l=n.querySelector(".__dialog-header"),a=n.querySelector(".__dialog-body-inner"),c=n.querySelector(".__dialog-footer-inner"),t=l.querySelector(".__dialog-header-title"),i=n.querySelectorAll(".__dialog-button");e.footer||c.parentNode.removeChild(c),this.dialog=n,this.mask=o,this.container=s,this.header=l,this.body=a,this.footer=c,this.title=t,this.button=i,this.render(),document.body.appendChild(n)}}])&&o(t.prototype,e),n&&o(t,n),i}();return d(_.prototype,t,i,n,w,{dialogTemplate:function(){return'\n        <div class="__dialog '.concat(this.options.customClass,'">\n            <div class="__dialog-mask" ').concat(this.options.closeOnClickModal?'data-dialog-action="close"':""," ").concat(this.options.modal?"":'style="display:none;"','></div>\n            <div class="__dialog-container ').concat(this.options.fullscreen?"__dialog-fullscreen":"",'">\n                <div class="__dialog-header">\n                    <div class="__dialog-header-title"> ').concat(this.options.title,' </div>\n                    <div data-role="button" class="__dialog-button" data-dialog-action="toogle" ').concat(this.options.showToggle?"":'style="display:none;"','></div>\n                    <div data-role="button" class="__dialog-button" data-dialog-action="close" ').concat(this.options.showClose?"":'style="display:none;"','></div>\n                </div>\n                <div class="__dialog-body">\n                    <div class="__dialog-body-inner">\n                        ').concat(this.options.body,'\n                    </div>\n                </div>\n                <div class="__dialog-footer">\n                    <div class="__dialog-footer-inner">\n                        <div data-role="button" class="__dialog-button" data-dialog-action="cancel"> ').concat(this.options.cancelButtonText,' </div>\n                        <div data-role="button" class="__dialog-button" data-dialog-action="submit"> ').concat(this.options.submitButtonText," </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        ")}}),_});